#!/usr/bin/env python

from qt import *
import sys, os, string, array
import getpass, os.path, shutil
from remoteparams import RemoteParams
from c111globals import C111Globals
constg = C111Globals() ;

class RemoteParamsImpl(RemoteParams):
    def __init__(self, *args):
        apply(RemoteParams.__init__,(self,) + args)
        self.dport = constg.DASY_NETWORK_PORT
        f = constg.CFG_PATH_MAIN  +  constg.CFG_PATH_SERVER + "DasyServerParams.cfg" ;
        if( os.path.exists( f ) == True ):
            fp = open( f , 'r' )
            strr = fp.read()
            portd = strr.split(":") ;
            self.dport = int(portd[1]) ;
            self.PortSpinBox.setValue(self.dport) ;
            fp.close();
        
        
        
    def ok(self):
        print "ACCEPT"
        port = self.PortSpinBox.value() ;
        strport = "PORT: " + str(port) ;
        print strport ;
        f = constg.CFG_PATH_MAIN  +  constg.CFG_PATH_SERVER + "DasyServerParams.cfg" ;
        fp = open( f , 'w' )
        fp.write( strport )
        fp.close()
        return ;
        #self.close()