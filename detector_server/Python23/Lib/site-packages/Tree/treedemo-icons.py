# demo using different icons in tree widget
#
# 27-AUG-01 Last update

import os
import Tree
from Tkinter import *

def getfiles(node):
    path=apply(os.path.join, node.full_id())
    for filename in os.listdir(path):
        full=os.path.join(path, filename)
        name=filename
        folder=0
        icon=regr_icon
        if os.path.isdir(full):
            # it's a directory
            folder=1
        elif not os.path.isfile(full):
            # but it's not a file
            icon=spec_icon
            
        if os.path.islink(full):
            # it's a link
            name=name+' ('+os.readlink(full)+')'
            icon=link_icon
            
        if folder:
            # it's a collapsed directory
            t.add_node(name=name, id=filename, flag=1,
                       collapsed_icon=shut_icon, expanded_icon=open_icon)
        else:
            # it's not!!
            t.add_node(name=name, id=filename, collapsed_icon=icon)

root=Tk()
root.title(os.path.basename(sys.argv[0]))

# create our icons (must be done AFTER Tkinter is initialized)
shut_icon=PhotoImage(file='close.gif')
open_icon=PhotoImage(file='open.gif')
regr_icon=PhotoImage(file='file1.gif')
link_icon=PhotoImage(file='file2.gif')
spec_icon=PhotoImage(file='file3.gif')

# create the control
t=Tree.Tree(master=root,
            get_contents_callback=getfiles,
            root_id=os.sep,
            root_label=os.sep,
            line_flag=0,
            collapsed_icon=shut_icon,
            expanded_icon=open_icon,
            width=300)
t.grid(row=0, column=0, sticky=N+E+W+S)

root.grid_rowconfigure(0, weight=1)
root.grid_columnconfigure(0, weight=1)
sb=Scrollbar(root)
sb.grid(row=0, column=1, sticky=N+S)
t.configure(yscrollcommand=sb.set)
sb.configure(command=t.yview)
sb=Scrollbar(root, orient=HORIZONTAL)
sb.grid(row=1, column=0, sticky=E+W)
t.configure(xscrollcommand=sb.set)
sb.configure(command=t.xview)
t.focus_set()
t.root.expand()
root.mainloop()
